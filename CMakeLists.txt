CMAKE_MINIMUM_REQUIRED(VERSION 3.1)
PROJECT (ALCP)
SET(CMAKE_BUILD_TYPE RELEASE)

# ADDING INCLUDE DIRECTORY
INCLUDE_DIRECTORIES(INCLUDE)

# SPECIFY THE C STANDARD
SET(CMAKE_C_STANDARD 11)
SET(CMAKE_CXX_STANDARD 17)
SET(CMAKE_C_STANDARD_REQUIRED TRUE)
SET(CMAKE_CXX_STANDARD_REQUIRED TRUE)

IF(NOT CMAKE_BUILD_TYPE)
 SET(CMAKE_BUILD_TYPE "Release" CACHE STRING
     "Choose the type of build, options are: Debug Release"
     FORCE)
ENDIF()

SET( CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/cmake" )

# CONTROL WHERE THE STATIC AND SHARED LIBRARIES ARE BUILT SO THAT ON WINDOWS
# WE DON'T NEED TO TINKER WITH THE PATH TO RUN THE EXECUTABLE
SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}")
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}")
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}")

OPTION(ALCP_DOCS "ENABLE DOCUMENTATION" ON)
OPTION(ALCP_TESTS "ENABLE TESTING" ON)
OPTION(ALCP_EXAMPLES "ENABLE EXAMPLES" ON)

IF (NOT DEFINED BUILD_SHARED_LIBS)
	SET (BUILD_SHARED_LIBS ON)
ENDIF()

SET(CMAKE_DEBUG_POSTFIX _DEBUG)


# CONFIGURE A HEADER FILE TO PASS SOME OF THE CMAKE SETTINGS
# TO THE SOURCE CODE
CONFIGURE_FILE(include/alcp/config.h.in include/alcp/config.h)

ADD_SUBDIRECTORY(lib)

IF (ALCP_DOCS)
	ADD_SUBDIRECTORY(docs)
ENDIF()

IF (ALCP_EXAMPLES)
	ADD_SUBDIRECTORY(examples)
ENDIF()

IF (ALCP_TESTS)
	ENABLE_TESTING()
	ADD_SUBDIRECTORY(tests)
ENDIF()

IF (ALCP_BENCH)
	IF (NOT EXISTS ${CMAKE_CURRENT_LIST_DIR}/BENCHMARK)
		MESSAGE(FATAL_ERROR "BENCHMARKS NOT SUPPORTED")
	ENDIF()

	ENABLE_TESTING()
	ADD_SUBDIRECTORY(TEST/BENCHMARK)
ENDIF()

#INSTALL(TARGETS ALCP
#	RUNTIME DESTINATION BIN
#	LIBRARY DESTINATION LIB
#	ARCHIVE DESTINATION LIB)

#INSTALL(DIRECTORY INCLUDE/API
#	RENAME DESTINATION INCLUDE/ALCP)

