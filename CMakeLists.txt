CMAKE_MINIMUM_REQUIRED(VERSION 3.1)
PROJECT (ALCP)
#SET(CMAKE_BUILD_TYPE RELEASE)

# SPECIFY THE C STANDARD
SET(CMAKE_C_STANDARD 11)
SET(CMAKE_CXX_STANDARD 17)
SET(CMAKE_C_STANDARD_REQUIRED TRUE)
SET(CMAKE_CXX_STANDARD_REQUIRED TRUE)

IF(NOT CMAKE_BUILD_TYPE)
 SET(CMAKE_BUILD_TYPE RELEASE) 
ENDIF()

SET( CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/cmake" )

# Make the static and shared libraries are built in top most directory
SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}")
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}")

# We want examples and other tests to be in their respective folder,
# Hence this is commented out
#SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${PROJECT_BINARY_DIR}")

OPTION(ALCP_ENABLE_DOCS "ENABLE DOCUMENTATION" OFF)
OPTION(ALCP_ENABLE_TESTS "ENABLE TESTING" OFF)
OPTION(ALCP_ENABLE_EXAMPLES "ENABLE EXAMPLES" OFF)
OPTION(ENABLE_TESTS_IPP_API "ENABLE IPP CALLS IN TESTING AND BENCHMARKING" OFF)

IF (NOT DEFINED BUILD_SHARED_LIBS)
	SET (BUILD_SHARED_LIBS ON)
ENDIF()

SET(CMAKE_DEBUG_POSTFIX _DEBUG)


# CONFIGURE A HEADER FILE TO PASS SOME OF THE CMAKE SETTINGS
# TO THE SOURCE CODE
CONFIGURE_FILE(include/alcp/config.h.in include/alcp/config.h)

ADD_SUBDIRECTORY(lib)

IF (ALCP_ENABLE_DOCS)
	ADD_SUBDIRECTORY(docs)
ENDIF()

IF (ALCP_ENABLE_EXAMPLES)
	ADD_SUBDIRECTORY(examples)
	MESSAGE(STATUS "Adding Examples to the build")
ENDIF()

IF (ALCP_ENABLE_TESTS)
	ENABLE_TESTING()
	ADD_SUBDIRECTORY(tests)
ENDIF()

IF (ALCP_BENCH)
	IF (NOT EXISTS ${CMAKE_CURRENT_LIST_DIR}/bench)
		MESSAGE(FATAL_ERROR "BENCHMARKS NOT SUPPORTED")
	ENDIF()
	ENABLE_TESTING()
	ADD_SUBDIRECTORY(bench)
ENDIF()

#INSTALL(TARGETS ALCP
#	RUNTIME DESTINATION BIN
#	LIBRARY DESTINATION LIB
#	ARCHIVE DESTINATION LIB)

#INSTALL(DIRECTORY INCLUDE/API
#	RENAME DESTINATION INCLUDE/ALCP)

